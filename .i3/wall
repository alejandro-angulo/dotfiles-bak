shopt -s nullglob
wall_dir="$HOME/data/Dropbox/walls"
refresh_rate="15m"

while true; do
  files=()
  for i in "${wall_dir}"/*.jpg "${wall_dir}"/*.png; do
    [[ -f $i ]] && files+=("$i")
  done
  range=${#files[@]}
  
  rand_idx=$((RANDOM % range))
  feh --bg-scale "${files[$rand_idx]}"
  betterlockscreen -u "${files[rand_idx]}"

  sleep "${refresh_rate}"
done

